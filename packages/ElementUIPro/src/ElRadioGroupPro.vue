<template>
  <el-radio-group
    v-loading="loading"
    v-bind="$attrs"
    :value="valueGetter(model)"
    :data-split="split"
    v-on="$listeners"
    @input="handleInput"
  >
    <template v-for="(item, index) in innerOptions">
      <el-radio-button
        v-if="item.type === 'button'"
        :key="index"
        :label="item.value"
        :disabled="item.disabled"
        :name="item.name"
      >
        {{ item.label }}
      </el-radio-button>
      <el-radio
        v-else
        :key="index"
        :label="item.value"
        :border="item.border"
        :disabled="item.disabled"
        :name="item.name"
        :size="item.size"
      >
        {{ item.label }}
      </el-radio>
    </template>
  </el-radio-group>
</template>

<script>
import createGetterAndSetter from './mixin/createGetterAndSetter';
import dataFetch from './mixin/dataFetch';
import common from './mixin/common';

export default {
  name: 'ElRadioGroupPro',
  model: {
    prop: 'value',
    event: 'update:value',
  },
  mixins: [createGetterAndSetter(undefined), dataFetch, common],
  props: {
    value: [String, Number, Boolean],
    options: Array,
    split: Boolean,
  },
  computed: {
    innerOptions() {
      const { options, ops } = this;
      return options || ops || [];
    },
  },
};
</script>
<style lang="scss">
.el-radio-group[data-split='true'] {
  .el-radio-button + .el-radio-button {
    margin-inline-start: 2rem;
  }
  .el-radio-button__inner {
    border-left: 1px solid #dcdfe6;
    border-radius: 4px;
    box-shadow: none !important;
  }
}
</style>
